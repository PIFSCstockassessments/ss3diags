<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Hindcasting Cross-Validations of Multiple Models — SSplotHCxval • ss3diags</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Hindcasting Cross-Validations of Multiple Models — SSplotHCxval"><meta property="og:description" content="Plots one-step ahead hindcasting cross-validations and computes MASE from
prediction residuals.MASE is calculated as the average ratio of mean
absolute error (MAE) of prediction residuals (MAE.PR) and naive
predictions (MAE.base). MASE.adj sets the MAE.base to a minimum
MAE.base.adj (default=0.1). MASE.adj allow passing (MASE&amp;lt;1) if
MAE.PE &amp;lt; 0.1 and thus accurate if obs show very little annual variation"><meta property="og:image" content="https://pifscstockassessments.github.io/ss3diags/logo.svg"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">ss3diags</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">2.1.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/PIFSCstockassessments/ss3diags/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Hindcasting Cross-Validations of Multiple Models</h1>
    <small class="dont-index">Source: <a href="https://github.com/PIFSCstockassessments/ss3diags/blob/HEAD/R/SSplotHCxval.R" class="external-link"><code>R/SSplotHCxval.R</code></a></small>
    <div class="hidden name"><code>SSplotHCxval.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Plots one-step ahead hindcasting cross-validations and computes MASE from
prediction residuals.<code>MASE</code> is calculated as the average ratio of mean
absolute error (<code>MAE</code>) of prediction residuals (<code>MAE.PR</code>) and naive
predictions (<code>MAE.base</code>). <code>MASE.adj</code> sets the <code>MAE.base</code> to a minimum
<code>MAE.base.adj</code> (<code>default=0.1</code>). <code>MASE.adj</code> allow passing (<code>MASE&lt;1</code>) if
<code>MAE.PE &lt; 0.1</code> and thus accurate if obs show very little annual variation</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">SSplotHCxval</span><span class="op">(</span></span>
<span>  <span class="va">retroSummary</span>,</span>
<span>  subplots <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"cpue"</span>, <span class="st">"len"</span>, <span class="st">"age"</span><span class="op">)</span>,</span>
<span>  Season <span class="op">=</span> <span class="st">"default"</span>,</span>
<span>  print <span class="op">=</span> <span class="fu">deprecated</span><span class="op">(</span><span class="op">)</span>,</span>
<span>  print_plot <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  png <span class="op">=</span> <span class="fu">deprecated</span><span class="op">(</span><span class="op">)</span>,</span>
<span>  use_png <span class="op">=</span> <span class="va">print_plot</span>,</span>
<span>  pdf <span class="op">=</span> <span class="fu">deprecated</span><span class="op">(</span><span class="op">)</span>,</span>
<span>  use_pdf <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  models <span class="op">=</span> <span class="st">"all"</span>,</span>
<span>  endyrvec <span class="op">=</span> <span class="st">"default"</span>,</span>
<span>  xmin <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  indexselect <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  MAE.base.adj <span class="op">=</span> <span class="fl">0.1</span>,</span>
<span>  show.mase.adj <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  indexUncertainty <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  col <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  pch <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  lty <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  lwd <span class="op">=</span> <span class="fl">2</span>,</span>
<span>  tickEndYr <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  xlim <span class="op">=</span> <span class="st">"default"</span>,</span>
<span>  ylimAdj <span class="op">=</span> <span class="fl">1.15</span>,</span>
<span>  ylim <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  xaxs <span class="op">=</span> <span class="st">"i"</span>,</span>
<span>  yaxs <span class="op">=</span> <span class="st">"i"</span>,</span>
<span>  xylabs <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  type <span class="op">=</span> <span class="st">"o"</span>,</span>
<span>  uncertainty <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  legend <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  legendlabels <span class="op">=</span> <span class="st">"default"</span>,</span>
<span>  legendloc <span class="op">=</span> <span class="st">"topright"</span>,</span>
<span>  legendorder <span class="op">=</span> <span class="st">"default"</span>,</span>
<span>  legendncol <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  legendcex <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  legendsp <span class="op">=</span> <span class="fl">0.9</span>,</span>
<span>  legendindex <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  pwidth <span class="op">=</span> <span class="fl">6.5</span>,</span>
<span>  pheight <span class="op">=</span> <span class="fl">5</span>,</span>
<span>  punits <span class="op">=</span> <span class="st">"in"</span>,</span>
<span>  res <span class="op">=</span> <span class="fl">300</span>,</span>
<span>  ptsize <span class="op">=</span> <span class="fl">10</span>,</span>
<span>  cex.main <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  plotdir <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  filenameprefix <span class="op">=</span> <span class="st">""</span>,</span>
<span>  par <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>mar <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">5</span>, <span class="fl">4</span>, <span class="fl">1</span>, <span class="fl">1</span><span class="op">)</span> <span class="op">+</span> <span class="fl">0.1</span><span class="op">)</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  shadecol <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/grDevices/gray.html" class="external-link">grey</a></span><span class="op">(</span><span class="fl">0.5</span>, <span class="fl">0.4</span><span class="op">)</span>,</span>
<span>  shadecol2 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/grDevices/gray.html" class="external-link">grey</a></span><span class="op">(</span><span class="fl">0.5</span>, <span class="fl">0.4</span><span class="op">)</span>,</span>
<span>  shadealpha <span class="op">=</span> <span class="fl">0.3</span>,</span>
<span>  new <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  add <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  mcmcVec <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  indexQlabel <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  indexQdigits <span class="op">=</span> <span class="fl">4</span>,</span>
<span>  indexfleets <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  plot <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  shadecol1 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/grDevices/gray.html" class="external-link">grey</a></span><span class="op">(</span><span class="fl">0.5</span>, <span class="fl">0.4</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>retroSummary</dt>
<dd><p>List created by <code><a href="https://r4ss.github.io/r4ss/reference/SSsummarize.html" class="external-link">r4ss::SSsummarize()</a></code> or
<code><a href="SSretroComps.html">SSretroComps()</a></code></p></dd>


<dt>subplots</dt>
<dd><p>optional use of the following:</p><ul><li><p><code>"cpue"</code> Index of abundance data</p></li>
<li><p><code>"len"</code> Length-composition data</p></li>
<li><p><code>"age"</code> Age-composition data</p></li>
</ul></dd>


<dt>Season</dt>
<dd><p>option to specify Season as an integer of value 1-4. Default
uses first available, i.e. usual Seas = 1</p></dd>


<dt>print</dt>
<dd><p>DEPRECATED, please use <code>print_plot</code>.</p></dd>


<dt>print_plot</dt>
<dd><p>Flag to enable plot graphic device to print to PNG or PNG files.</p></dd>


<dt>png</dt>
<dd><p>DEPRECATED. Please use <code>use_png</code>.</p></dd>


<dt>use_png</dt>
<dd><p>Enables plots to be generated to PNG files. Defaults to print value</p></dd>


<dt>pdf</dt>
<dd><p>DEPRECATED. Please use <code>use_pdf</code>.</p></dd>


<dt>use_pdf</dt>
<dd><p>Enables plots to be generated to pdf file.</p></dd>


<dt>models</dt>
<dd><p>Optional subset of the models of <code>summaryoutput</code> (or a similar
field with a different name): a list created by the function
<a href="https://r4ss.github.io/r4ss/reference/SSsummarize.html" class="external-link">r4ss::SSsummarize</a>. Either <code>"all"</code> or a vector of numbers indicating
columns in summary tables.</p></dd>


<dt>endyrvec</dt>
<dd><p>Optional single year or vector of years representing the
final year of values to show for each model. By default it is set to the
ending year specified in each model.</p></dd>


<dt>xmin</dt>
<dd><p>optional number first year shown in plot (if available)</p></dd>


<dt>indexselect</dt>
<dd><p>Vector of fleet numbers for each model for which to
compare</p></dd>


<dt>MAE.base.adj</dt>
<dd><p>minimum <code>MASE</code> denominator (naive predictions) for
<code>MASE.adj</code> (default = 0.1)</p></dd>


<dt>show.mase.adj</dt>
<dd><p>if TRUE, it show <code>mase.adj</code> in plot</p></dd>


<dt>indexUncertainty</dt>
<dd><p>Show fixed uncertainty intervals on index
(not estimated)</p></dd>


<dt>col</dt>
<dd><p>Optional vector of colors to be used for lines. Input NULL</p></dd>


<dt>pch</dt>
<dd><p>Optional vector of plot character values</p></dd>


<dt>lty</dt>
<dd><p>Optional vector of line types</p></dd>


<dt>lwd</dt>
<dd><p>Optional vector of line widths</p></dd>


<dt>tickEndYr</dt>
<dd><p><a href="https://rdrr.io/r/base/logical.html" class="external-link">Logical</a> flag: set TRUE or FALSE to switch to turn
on/off extra axis mark at final year in timeseries plots.</p></dd>


<dt>xlim</dt>
<dd><p>Optional, years to use for x-axis. Default value NULL (or "default"),
uses all years available.</p></dd>


<dt>ylimAdj</dt>
<dd><p>Multiplier for ylim parameter. Allows additional white space.</p></dd>


<dt>ylim</dt>
<dd><p>will over-write <code>ylimAdj</code> if specified</p></dd>


<dt>xaxs</dt>
<dd><p>Choice of xaxs parameter See <code><a href="https://rdrr.io/r/graphics/par.html" class="external-link">?par</a></code> for more info.</p></dd>


<dt>yaxs</dt>
<dd><p>Choice of yaxs parameter. See <code><a href="https://rdrr.io/r/graphics/par.html" class="external-link">?par</a></code> for more info.</p></dd>


<dt>xylabs</dt>
<dd><p><a href="https://rdrr.io/r/base/logical.html" class="external-link">Logical</a> flag: set TRUE or FALSE to include x- and
y-axis labels to the plot. Defaults to TRUE</p></dd>


<dt>type</dt>
<dd><p>The type of plot to be drawn. For more details, see <code><a href="https://rdrr.io/r/base/plot.html" class="external-link">plot</a></code>.</p></dd>


<dt>uncertainty</dt>
<dd><p>Logical flag to enable plots with uncertainty intervals. Either a single
TRUE/FALSE value, or a vector of TRUE/FALSE values around SSB or F
estimated timeseries, or a set of integers corresponding to
the choice of models.</p></dd>


<dt>legend</dt>
<dd><p>Flag to enable legend to plot. TRUE by default.</p></dd>


<dt>legendlabels</dt>
<dd><p>Optional vector of labels to include in legend.</p></dd>


<dt>legendloc</dt>
<dd><p>Location of legend. Either a string like "topleft" or a vector of two
numeric values representing the fraction of the maximum in the x and y
dimensions, respectively. See <code><a href="https://rdrr.io/r/graphics/legend.html" class="external-link">help("legend")</a></code> for more info on the
string options.</p></dd>


<dt>legendorder</dt>
<dd><p>Optional vector of model numbers that can be used to have the legend
display the model names in an order that is different than that
which is represented in the summary input object.</p></dd>


<dt>legendncol</dt>
<dd><p>Number of columns for the legend.</p></dd>


<dt>legendcex</dt>
<dd><p>Allows to adjust legend cex</p></dd>


<dt>legendsp</dt>
<dd><p>Space between legend labels</p></dd>


<dt>legendindex</dt>
<dd><p>Allows to add legend for selected indices (plots)</p></dd>


<dt>pwidth</dt>
<dd><p>Default width of plot printed to plot in units of <code>punits</code></p></dd>


<dt>pheight</dt>
<dd><p>Height of plot printed to plot in units of <code>punits </code></p></dd>


<dt>punits</dt>
<dd><p>Measurement units for <code>pwidth</code> and <code>pheight</code>. Default is <code>"in"</code>.</p><ul><li><p><code>"px"</code> (pixels)</p></li>
<li><p><code>"in"</code> (inches)</p></li>
<li><p><code>"cm"</code> (centimeters)</p></li>
<li><p><code>"mm"</code> (millimeters)</p></li>
</ul></dd>


<dt>res</dt>
<dd><p>Resolution for plots printed to files.</p></dd>


<dt>ptsize</dt>
<dd><p>Point size for plotted text in plots printed in files. See <code><a href="https://rdrr.io/r/grDevices/png.html" class="external-link">help("png")</a></code>
for more details</p></dd>


<dt>cex.main</dt>
<dd><p>Character expansion for plot titles.</p></dd>


<dt>plotdir</dt>
<dd><p>Directory where output plot file will be written. By default,
it will be the directory where the model was run.</p></dd>


<dt>filenameprefix</dt>
<dd><p>Additional text to append to output plot file name.
It will be separated from default name by an underscore.</p></dd>


<dt>par</dt>
<dd><p>A numerical vector of the form c(bottom, left, top, right) which
gives the number of lines of margin to be specified on the four sides of
the plot,which is passed to <code><a href="https://rdrr.io/r/graphics/par.html" class="external-link">par()</a></code>. Entering <code>NULL</code> passes plot's default
<code><a href="https://rdrr.io/r/graphics/par.html" class="external-link">par()</a></code> values (which depends on whether the main title is included or not)</p></dd>


<dt>verbose</dt>
<dd><p>Flag to print additional diagnostic messages to R console</p></dd>


<dt>shadecol</dt>
<dd><p>uncertainty shading of hcxval horizon</p></dd>


<dt>shadecol2</dt>
<dd><p>color for uncertainty in early years not affected by
hindcast</p></dd>


<dt>shadealpha</dt>
<dd><p>Transparency adjustment used to make default <code>shadecol</code>.
(currently not used)</p></dd>


<dt>new</dt>
<dd><p>Deprecated. New plot windows are created by default (TRUE), and the
option to disable this, via FALSE, is unused.</p></dd>


<dt>add</dt>
<dd><p>suppresses <code><a href="https://rdrr.io/r/graphics/par.html" class="external-link">par()</a></code> to create multiplot figs</p></dd>


<dt>mcmcVec</dt>
<dd><p>Logical vector of TRUE/FALSE values (or single value) indicating
whether input values are from MCMC or to use normal distribution around
MLE.</p></dd>


<dt>indexQlabel</dt>
<dd><p><a href="https://rdrr.io/r/base/logical.html" class="external-link">Logical</a> flag to add catchability to
legend in plot of index fits.</p></dd>


<dt>indexQdigits</dt>
<dd><p>Number of significant digits for catchability in legend</p></dd>


<dt>indexfleets</dt>
<dd><p>Fleet numbers for each model to compare
indices of abundance. Can take different forms:</p><ul><li><p>integer: (default) create a single comparison plot for the chosen
index</p></li>
<li><p>NULL: create a separate plot for each index as long as the fleet
numbering is the same across all models.</p></li>
<li><p>vector of length equal to number of models: a single fleet number
for each model to be compared in a single plot</p></li>
<li><p>list: list of fleet numbers associated with indices within each
model to be compared, where the list elements are each a vector of the
same length but the names of the list elements don't matter and can be
absent.</p></li>
</ul></dd>


<dt>plot</dt>
<dd><p>DEPRECATED. By default, TRUE, Plots (and subplots) are drawn to the
plot device. The option to explicitly disable this option (FALSE), is not
implemented. This option flag will be defunct in a future version</p></dd>


<dt>shadecol1</dt>
<dd><p>uncertainty shading of early years not affected by
hindcast (currently not used)</p></dd>

</dl></div>
    <div id="author">
    <h2>Author</h2>
    <p>Henning Winker (JRC-EC) and Laurence Kell (Sea++)</p>
    </div>

  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Henning Winker, Felipe Carvalho, Massimiliano Cardinale, Laurence Kell, Megumi Oshima, Eric Fletcher.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer></div>

  


  

  </body></html>

