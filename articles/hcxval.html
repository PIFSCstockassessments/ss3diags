<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Hindcast Cross-Validation • ss3diags</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Hindcast Cross-Validation">
<meta property="og:description" content="ss3diags">
<meta property="og:image" content="https://pifscstockassessments.github.io/ss3diags/logo.svg">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">ss3diags</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">2.1.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/Retrospective-Analysis.html">Retrospective Analysis</a>
    </li>
    <li>
      <a href="../articles/hcxval.html">Hindcast Cross-Validation</a>
    </li>
    <li>
      <a href="../articles/likelihood.html">Likelihood Profile</a>
    </li>
    <li>
      <a href="../articles/residuals.html">Residual Analyses</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/PIFSCstockassessments/ss3diags/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Hindcast Cross-Validation</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/PIFSCstockassessments/ss3diags/blob/HEAD/vignettes/articles/hcxval.Rmd" class="external-link"><code>vignettes/articles/hcxval.Rmd</code></a></small>
      <div class="hidden name"><code>hcxval.Rmd</code></div>

    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/PIFSCstockassessments/ss3diags" class="external-link">ss3diags</a></span><span class="op">)</span></span></code></pre></div>
<p>Hindcast Cross-Validation is used to evaluate the prediction skill of
a model by removing a portion of data, fitting the model to the
subsequent time series, then projecting over the period that was removed
and comparing the projected values to the observations that were
omitted. Prediction skill is determined using the mean absolute scaled
error (MASE) for input data (index of abundance, length composition,
etc). In brief, the MASE score scales the mean absolute error (MAE) of
forecasts (i.e., prediction residuals) to mean absolute error (MAE) of a
naïve in-sample prediction, which is realized in the form of a simple
‘persistence algorithm’, i.e. index of abunduance will be the same next
year as it is this year (see Eq. 3, p.5 in <a href="https://www.sciencedirect.com/science/article/pii/S0165783621000874" class="external-link">Carvalho
and Winker et al. 2021</a>). A MASE score &gt; 1 indicates that the
average model forecasts are worse than a random walk. Conversely, a MASE
score &lt; 1 indicates a level of prediction skill, for example, a MASE
of 0.5 indicates that the model forecasts twice as accurately as a naïve
baseline prediction; thus, the model has prediction skill.</p>
<p>Implementing the Hindcast Cross-Validation (HCxval) diagnostic in
Stock Synthesis requires the same model outputs generated when running a
retrospective analysis. Therefore, no additional step is needed for
HCxval if conducted in conjunction with retrospective analysis (see how
to conduct a <a href="https://pifscstockassessments.github.io/ss3diags/articles/Retrospective-Analysis.html">restrospective
analysis</a>). For this example we will use the same output created in
the retrospective example.</p>
<pre><code><span><span class="co">#&gt; [1] TRUE TRUE TRUE TRUE</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span></code></pre>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">retro_mods</span> <span class="op">&lt;-</span> <span class="fu">r4ss</span><span class="fu">::</span><span class="fu"><a href="https://r4ss.github.io/r4ss/reference/SSgetoutput.html" class="external-link">SSgetoutput</a></span><span class="op">(</span>dirvec <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">dir_retro</span>, <span class="st">"retrospectives"</span>, <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"retro"</span>, <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">0</span>,<span class="op">-</span><span class="fl">5</span>,by<span class="op">=</span><span class="op">-</span><span class="fl">1</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>, verbose <span class="op">=</span> <span class="cn">F</span><span class="op">)</span></span>
<span><span class="co">#&gt; Removing 0 out of 1472 rows in CompReport.sso which are duplicates.</span></span>
<span><span class="co">#&gt; Removing 0 out of 1472 rows in CompReport.sso which are duplicates.</span></span>
<span><span class="co">#&gt; Removing 0 out of 1472 rows in CompReport.sso which are duplicates.</span></span>
<span><span class="co">#&gt; Removing 0 out of 1472 rows in CompReport.sso which are duplicates.</span></span>
<span><span class="co">#&gt; Removing 0 out of 1472 rows in CompReport.sso which are duplicates.</span></span>
<span><span class="co">#&gt; Removing 0 out of 1472 rows in CompReport.sso which are duplicates.</span></span>
<span><span class="va">retroSummary</span> <span class="op">&lt;-</span> <span class="fu">r4ss</span><span class="fu">::</span><span class="fu"><a href="https://r4ss.github.io/r4ss/reference/SSsummarize.html" class="external-link">SSsummarize</a></span><span class="op">(</span><span class="va">retro_mods</span>, verbose <span class="op">=</span> <span class="cn">F</span><span class="op">)</span></span></code></pre></div>
<div class="section level2">
<h2 id="visualizing-output">Visualizing Output<a class="anchor" aria-label="anchor" href="#visualizing-output"></a>
</h2>
<p>HCxval is implemented using <code><a href="../reference/SSplotHCxval.html">ss3diags::SSplotHCxval()</a></code>,
which produces the novel HCxval diagnostic plot and computes the MASE
scores for indices of abundance, mean lengths, or mean ages that have
observations falling within the hindcast evaluation period.</p>
<p>Plotting HCxval for abundance indices requires the same step of
summarizing the list of retrospective runs as for the retrospective
analysis, which therefore only needs be done once. In this example we
will use <code>retroSummary</code> created <a href="https://pifscstockassessments.github.io/ss3diags/articles/Retrospective-Analysis.html">here</a>.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">r4ss</span><span class="fu">::</span><span class="fu"><a href="https://r4ss.github.io/r4ss/reference/sspar.html" class="external-link">sspar</a></span><span class="op">(</span>mfrow <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">2</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/SSplotHCxval.html">SSplotHCxval</a></span><span class="op">(</span><span class="va">retroSummary</span>, subplots <span class="op">=</span> <span class="st">"cpue"</span>, add <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt; Plotting Hindcast Cross-Validation (one-step-ahead) </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  Computing MASE with only 1 of 5  prediction residuals for Index SURVEY1 </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  Warning:  Unequal spacing of naive predictions residuals may influence the interpretation of MASE</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  Computing MASE with all 5 of 5  prediction residuals for Index SURVEY2</span></span></code></pre></div>
<p><img src="hcxval_files/figure-html/unnamed-chunk-4-1.png" width="700"></p>
<pre><code><span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; MASE stats by Index:</span></span>
<span><span class="co">#&gt;     Index Season      MASE     MAE.PR  MAE.base  MASE.adj n.eval</span></span>
<span><span class="co">#&gt; 1 SURVEY1      1 0.5026435 0.08879379 0.1766536 0.5026435      1</span></span>
<span><span class="co">#&gt; 2 SURVEY2      1 0.6149530 0.37737925 0.6136717 0.6149530      5</span></span></code></pre>
<p>In the plots above, we see that for both fleets, the model has fairly
good prediction skill (compared to a random walk) of index of abundance
data. In the plots, the white points and white dashed line are the
observed data that were included in the model with a truncated time
series. The larger colored points are the observed data from each
retrospective peel (i.e. data that was removed in that peel). The
smaller colored point and dashed line show the model predicted value.
The “Ref” line is the model run with the complete time series of data.
The grey shaded areas represent the uncertainty of the data, with the
darker portion indicating the portion that were included in the model
and the lighter portion indicating which ones were removed and
projected. The MASE scores displayed are the MASE and adjusted MASE in
parentheses.</p>
<div class="section level3">
<h3 id="composition-data">Composition Data<a class="anchor" aria-label="anchor" href="#composition-data"></a>
</h3>
<p>To visualize the mean length and mean age, you will need to add an
additional step. Because the forecast length- and age-composition
information are stored as “ghost files” in the SS report.sso file, you
need to use <code><a href="../reference/SSretroComps.html">ss3diags::SSretroComps()</a></code> to extract and
summarize that information before creating the plots.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">retroSummary_comps</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/SSretroComps.html">SSretroComps</a></span><span class="op">(</span><span class="va">retro_mods</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">r4ss</span><span class="fu">::</span><span class="fu"><a href="https://r4ss.github.io/r4ss/reference/sspar.html" class="external-link">sspar</a></span><span class="op">(</span>mfrow <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">2</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">hcl</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/SSplotHCxval.html">SSplotHCxval</a></span><span class="op">(</span><span class="va">retroSummary_comps</span>, subplots <span class="op">=</span> <span class="st">"len"</span>, add <span class="op">=</span> <span class="cn">TRUE</span>, ylim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">40</span>,<span class="fl">75</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; Plotting Hindcast Cross-Validation (one-step-ahead) </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  Computing MASE with all 5 of 5  prediction residuals for Index FISHERY</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  Computing MASE with only 1 of 5  prediction residuals for Index SURVEY1 </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  Warning:  Unequal spacing of naive predictions residuals may influence the interpretation of MASE</span></span></code></pre></div>
<p><img src="hcxval_files/figure-html/unnamed-chunk-5-1.png" width="700"></p>
<pre><code><span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; MASE stats by Index:</span></span></code></pre>
</div>
<div class="section level3">
<h3 id="customizing-the-plot">Customizing the Plot<a class="anchor" aria-label="anchor" href="#customizing-the-plot"></a>
</h3>
<p>HCxval plots can be customized in many ways, some common features
that you may want to specify are:</p>
<ul>
<li>displaying only a specific fleet</li>
<li>removing uncertainty intervals</li>
<li>adjusting the x- or y-axis</li>
<li>not displaying the adjusted MASE value on the plot</li>
</ul>
<p>Examples of each of these changes are shown below, incrementally
making each adjustment.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">r4ss</span><span class="fu">::</span><span class="fu"><a href="https://r4ss.github.io/r4ss/reference/sspar.html" class="external-link">sspar</a></span><span class="op">(</span>mfrow <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>,<span class="fl">2</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/SSplotHCxval.html">SSplotHCxval</a></span><span class="op">(</span><span class="va">retroSummary_comps</span>, subplots <span class="op">=</span> <span class="st">"len"</span>, add <span class="op">=</span> <span class="cn">TRUE</span>, indexselect <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span><span class="co">#&gt; Plotting Hindcast Cross-Validation (one-step-ahead) </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  Computing MASE with all 5 of 5  prediction residuals for Index FISHERY</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; MASE stats by Index:</span></span>
<span><span class="co">#&gt;     Index Season      MASE     MAE.PR   MAE.base  MASE.adj n.eval</span></span>
<span><span class="co">#&gt; 1 FISHERY      1 0.3591138 0.01034467 0.02880609 0.1034467      5</span></span>
<span><span class="fu"><a href="../reference/SSplotHCxval.html">SSplotHCxval</a></span><span class="op">(</span><span class="va">retroSummary_comps</span>, subplots <span class="op">=</span> <span class="st">"len"</span>, add <span class="op">=</span> <span class="cn">TRUE</span>, </span>
<span>             indexselect <span class="op">=</span> <span class="fl">1</span>, indexUncertainty <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="co">#&gt; Plotting Hindcast Cross-Validation (one-step-ahead) </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  Computing MASE with all 5 of 5  prediction residuals for Index FISHERY</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; MASE stats by Index:</span></span>
<span><span class="co">#&gt;     Index Season      MASE     MAE.PR   MAE.base  MASE.adj n.eval</span></span>
<span><span class="co">#&gt; 1 FISHERY      1 0.3591138 0.01034467 0.02880609 0.1034467      5</span></span>
<span><span class="fu"><a href="../reference/SSplotHCxval.html">SSplotHCxval</a></span><span class="op">(</span><span class="va">retroSummary_comps</span>, subplots <span class="op">=</span> <span class="st">"len"</span>, add <span class="op">=</span> <span class="cn">TRUE</span>, </span>
<span>             indexselect <span class="op">=</span> <span class="fl">1</span>, indexUncertainty <span class="op">=</span> <span class="cn">FALSE</span>, ylim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">45</span>,<span class="fl">70</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; Plotting Hindcast Cross-Validation (one-step-ahead) </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  Computing MASE with all 5 of 5  prediction residuals for Index FISHERY</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; MASE stats by Index:</span></span>
<span><span class="co">#&gt;     Index Season      MASE     MAE.PR   MAE.base  MASE.adj n.eval</span></span>
<span><span class="co">#&gt; 1 FISHERY      1 0.3591138 0.01034467 0.02880609 0.1034467      5</span></span>
<span><span class="fu"><a href="../reference/SSplotHCxval.html">SSplotHCxval</a></span><span class="op">(</span><span class="va">retroSummary_comps</span>, subplots <span class="op">=</span> <span class="st">"len"</span>, add <span class="op">=</span> <span class="cn">TRUE</span>, </span>
<span>             indexselect <span class="op">=</span> <span class="fl">1</span>, indexUncertainty <span class="op">=</span> <span class="cn">FALSE</span>, ylim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">45</span>,<span class="fl">70</span><span class="op">)</span>, show.mase.adj <span class="op">=</span> <span class="cn">F</span><span class="op">)</span></span>
<span><span class="co">#&gt; Plotting Hindcast Cross-Validation (one-step-ahead) </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  Computing MASE with all 5 of 5  prediction residuals for Index FISHERY</span></span></code></pre></div>
<p><img src="hcxval_files/figure-html/unnamed-chunk-6-1.png" width="700"></p>
<pre><code><span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; MASE stats by Index:</span></span>
<span><span class="co">#&gt;     Index Season      MASE     MAE.PR   MAE.base  MASE.adj n.eval</span></span>
<span><span class="co">#&gt; 1 FISHERY      1 0.3591138 0.01034467 0.02880609 0.1034467      5</span></span></code></pre>
</div>
</div>
<div class="section level2">
<h2 id="summary-table">Summary Table<a class="anchor" aria-label="anchor" href="#summary-table"></a>
</h2>
<p>In addition to the HCxval plots, a summary statistics table can be
produced using <code><a href="../reference/SSmase.html">ss3diags::SSmase()</a></code>. This table includes:</p>
<ul>
<li>Index - the fleet<br>
</li>
<li>Season<br>
</li>
<li>MASE - MASE score</li>
<li>MAE.PR - mean absolute error of prediction residuals</li>
<li>MASE.base - naive prediction</li>
<li>MASE.adj - adjusted MASE score</li>
<li>n.eval - number of points prediction skill was calculated for</li>
</ul>
<p>Adjusted MASE gets invoked in cases where the inter-annual variation
in the observed values is very small (default MAE &lt; 0.1 for naive
predictions log(y[t+1])-log(y[t])). The reasoning is that prediction
residuals must be already very accurate to fall below this threshold.
The adjusted MASE essential keep the naive prediction MAE denominator of
the MASE to a maximum. Below we show the effect of changing adjustment
threshold from the default <code>MAE.base.adj = 0.1</code></p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mase1</span> <span class="op">=</span> <span class="fu"><a href="../reference/SSmase.html">SSmase</a></span><span class="op">(</span><span class="va">retroSummary_comps</span>, quant<span class="op">=</span><span class="st">"len"</span>, MAE.base.adj <span class="op">=</span> <span class="fl">0.1</span><span class="op">)</span></span>
<span><span class="va">mase1</span></span>
<span><span class="co">#&gt;     Index Season      MASE     MAE.PR   MAE.base  MASE.adj n.eval</span></span>
<span><span class="co">#&gt; 1 FISHERY      1 0.3591138 0.01034467 0.02880609 0.1034467      5</span></span>
<span><span class="co">#&gt; 2 SURVEY1      1 0.6526074 0.05142002 0.07879167 0.5142002      1</span></span>
<span><span class="co">#&gt; 3   joint        0.4628955 0.01719056 0.03713702 0.1719056      6</span></span></code></pre></div>
<p>to a larger value <code>MAE.base.adj = 0.15</code></p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/SSmase.html">SSmase</a></span><span class="op">(</span><span class="va">retroSummary_comps</span>, quant<span class="op">=</span><span class="st">"len"</span>, MAE.base.adj <span class="op">=</span> <span class="fl">0.15</span><span class="op">)</span></span>
<span><span class="co">#&gt;     Index Season      MASE     MAE.PR   MAE.base   MASE.adj n.eval</span></span>
<span><span class="co">#&gt; 1 FISHERY      1 0.3591138 0.01034467 0.02880609 0.06896444      5</span></span>
<span><span class="co">#&gt; 2 SURVEY1      1 0.6526074 0.05142002 0.07879167 0.34280015      1</span></span>
<span><span class="co">#&gt; 3   joint        0.4628955 0.01719056 0.03713702 0.11460372      6</span></span></code></pre></div>
<p>where <code>MASE</code> is the ratio of the mean absolute error of
the prediction residuals <code>MAE.PR</code> to the residuals of the
naive predictions <code>MAE.base</code></p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mase1</span><span class="op">$</span><span class="va">MAE.PR</span><span class="op">/</span><span class="va">mase1</span><span class="op">$</span><span class="va">MAE.base</span></span>
<span><span class="co">#&gt; [1] 0.3591138 0.6526074 0.4628955</span></span>
<span><span class="va">mase1</span><span class="op">$</span><span class="va">MASE</span></span>
<span><span class="co">#&gt; [1] 0.3591138 0.6526074 0.4628955</span></span></code></pre></div>
<p>and MASE.adj</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mase1</span><span class="op">$</span><span class="va">MAE.PR</span><span class="op">/</span><span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">pmax</a></span><span class="op">(</span><span class="va">mase1</span><span class="op">$</span><span class="va">MAE.base</span>,<span class="fl">0.1</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 0.1034467 0.5142002 0.1719056</span></span>
<span><span class="va">mase1</span><span class="op">$</span><span class="va">MASE.adj</span></span>
<span><span class="co">#&gt; [1] 0.1034467 0.5142002 0.1719056</span></span></code></pre></div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Henning Winker, Felipe Carvalho, Massimiliano Cardinale, Laurence Kell, Megumi Oshima, Eric Fletcher.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
