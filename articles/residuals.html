<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Residual Analyses • ss3diags</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Residual Analyses">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">ss3diags</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">2.2.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/aspm.html">ASPM</a></li>
    <li><a class="dropdown-item" href="../articles/hcxval.html">Hindcast Cross-Validation</a></li>
    <li><a class="dropdown-item" href="../articles/Jitter.html">Jitter Analysis</a></li>
    <li><a class="dropdown-item" href="../articles/likelihood.html">Likelihood Profile</a></li>
    <li><a class="dropdown-item" href="../articles/residuals.html">Residual Analyses</a></li>
    <li><a class="dropdown-item" href="../articles/Retrospective-Analysis.html">Retrospective Analysis</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/PIFSCstockassessments/ss3diags/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.svg" class="logo" alt=""><h1>Residual Analyses</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/PIFSCstockassessments/ss3diags/blob/main/vignettes/articles/residuals.Rmd" class="external-link"><code>vignettes/articles/residuals.Rmd</code></a></small>
      <div class="d-none name"><code>residuals.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/PIFSCstockassessments/ss3diags" class="external-link">ss3diags</a></span><span class="op">)</span></span></code></pre></div>
<p>Within the <code>ss3diags</code> package, there are 2 main diagnostic
functions useful for residual analysis:
<code><a href="../reference/SSplotRunstest.html">ss3diags::SSplotRunstest()</a></code> and
<code><a href="../reference/SSplotJABBAres.html">ss3diags::SSplotJABBAres()</a></code>. It is suggested to implement
these diagnostics early and often in the model development process to
gain a better understanding of how your model is fitting to your
data.</p>
<div class="section level2">
<h2 id="runs-test">Runs Test<a class="anchor" aria-label="anchor" href="#runs-test"></a>
</h2>
<p>The runs test is a nonparametric hypothesis test for randomness in a
data sequence that calculates the 2-sided p-value to estimate the number
of runs (i.e., sequences of values of the same sign) above and below a
reference value. The runs test can diagnose model misspecification using
residuals from fits to index and composition data (<a href="https://www.sciencedirect.com/science/article/pii/S0165783616303113" class="external-link">Carvalho
et al. 2017</a>) by testing if there are non-random patterns in the
residuals. In addition, the three-sigma limits can be considered useful
for identifying potential outliers as any data point further than three
standard deviations away from the expected residual process average
would be unlikely given a random process error in the observed residual
distribution.</p>
<p>For this example we will be using the “simple_small” SS model
included within the <code>r4ss</code> package. We can read in the report
file from the model output using the <code><a href="https://r4ss.github.io/r4ss/reference/SS_output.html" class="external-link">r4ss::SS_output()</a></code>
function as shown below.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/r4ss/r4ss" class="external-link">r4ss</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">files_path</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"simple_small"</span>, package <span class="op">=</span> <span class="st">"r4ss"</span><span class="op">)</span></span>
<span><span class="va">report</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r4ss.github.io/r4ss/reference/SS_output.html" class="external-link">SS_output</a></span><span class="op">(</span>dir <span class="op">=</span> <span class="va">files_path</span>, verbose <span class="op">=</span> <span class="cn">FALSE</span>, printstats <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://r4ss.github.io/r4ss/reference/sspar.html" class="external-link">sspar</a></span><span class="op">(</span>mfrow <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/SSplotRunstest.html">SSplotRunstest</a></span><span class="op">(</span><span class="va">report</span>, add <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt; Running Runs Test Diagnostics w/ plots forIndex</span></span>
<span><span class="co">#&gt; Plotting Residual Runs Tests</span></span></code></pre></div>
<p><img src="residuals_files/figure-html/unnamed-chunk-3-1.png" width="700"></p>
<pre><code><span><span class="co">#&gt; Residual Runs Test (/w plot) stats by Index:</span></span>
<span><span class="co">#&gt;     Index runs.p   test  sigma3.lo sigma3.hi type</span></span>
<span><span class="co">#&gt; 1 SURVEY1  0.159 Passed -0.7301441 0.7301441 cpue</span></span>
<span><span class="co">#&gt; 2 SURVEY2  0.887 Passed -1.1052361 1.1052361 cpue</span></span></code></pre>
<p>The output for <code><a href="../reference/SSplotRunstest.html">SSplotRunstest()</a></code> includes a plot of the
residuals by fleet and a table with the results from the runs test and
‘three-sigma limit’ values. In the plots above, the shaded area
represents the ‘three-sigma limit’, or three residual standard
deviations from zero. If any of the individual residual points fall
outside of the three-sigma limit, they are colored red. Green shaded
area indicates the residuals are randomly distributed (p-value &gt;=
0.05) whereas red shaded area indicates the residuals are not randomly
distributed. Failing the runs test (p-value &lt; 0.05) can be indicative
of some misspecification or conflict with the indices or composition
data.</p>
<div class="section level3">
<h3 id="customizing-the-plot">Customizing the Plot<a class="anchor" aria-label="anchor" href="#customizing-the-plot"></a>
</h3>
<p>Runs test plots can be customized as needed. Some common features
that you may want to specify are:</p>
<ul>
<li>plotting other data types (default is Index of Abundance)</li>
<li>plotting specific fleet(s)</li>
<li>adjusting the y-axis range</li>
</ul>
<p>Examples of each of these changes are shown below, incrementally
making each adjustment. To plot other data types, they can be specified
with the <code>subplots</code> argument, and the options include “cpue”,
“len”, “age”, “size”, or “con”. “con” is for conditional size-at-age
data and “size” is for generalized size composition data. Fleets can be
specified using the <code>indexselect()</code> function, which takes a
vector of the fleet numbers to plot.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://r4ss.github.io/r4ss/reference/sspar.html" class="external-link">sspar</a></span><span class="op">(</span>mfrow <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/SSplotRunstest.html">SSplotRunstest</a></span><span class="op">(</span><span class="va">report</span>, subplots <span class="op">=</span> <span class="st">"len"</span>, indexselect <span class="op">=</span> <span class="fl">1</span>, add <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt; Running Runs Test Diagnostics w/ plots forMean length</span></span>
<span><span class="co">#&gt; Plotting Residual Runs Tests</span></span>
<span><span class="co">#&gt; Residual Runs Test (/w plot) stats by Mean length:</span></span>
<span><span class="co">#&gt;     Index runs.p   test  sigma3.lo sigma3.hi type</span></span>
<span><span class="co">#&gt; 1 FISHERY  0.126 Passed -0.0613176 0.0613176  len</span></span>
<span><span class="fu"><a href="../reference/SSplotRunstest.html">SSplotRunstest</a></span><span class="op">(</span><span class="va">report</span>, subplots <span class="op">=</span> <span class="st">"age"</span>, indexselect <span class="op">=</span> <span class="fl">2</span>, add <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt; Running Runs Test Diagnostics w/ plots forMean age</span></span>
<span><span class="co">#&gt; Plotting Residual Runs Tests</span></span>
<span><span class="co">#&gt; Residual Runs Test (/w plot) stats by Mean age:</span></span>
<span><span class="co">#&gt;     Index runs.p   test  sigma3.lo sigma3.hi type</span></span>
<span><span class="co">#&gt; 1 SURVEY1   0.11 Passed -0.2743816 0.2743816  age</span></span>
<span><span class="fu"><a href="../reference/SSplotRunstest.html">SSplotRunstest</a></span><span class="op">(</span><span class="va">report</span>, subplots <span class="op">=</span> <span class="st">"age"</span>, indexselect <span class="op">=</span> <span class="fl">2</span>, add <span class="op">=</span> <span class="cn">TRUE</span>, ylim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">0.5</span>, <span class="fl">0.5</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; Running Runs Test Diagnostics w/ plots forMean age</span></span>
<span><span class="co">#&gt; Plotting Residual Runs Tests</span></span>
<span><span class="co">#&gt; Residual Runs Test (/w plot) stats by Mean age:</span></span>
<span><span class="co">#&gt;     Index runs.p   test  sigma3.lo sigma3.hi type</span></span>
<span><span class="co">#&gt; 1 SURVEY1   0.11 Passed -0.2743816 0.2743816  age</span></span>
<span><span class="fu"><a href="../reference/SSplotRunstest.html">SSplotRunstest</a></span><span class="op">(</span><span class="va">report</span>, subplots <span class="op">=</span> <span class="st">"age"</span>, indexselect <span class="op">=</span> <span class="fl">2</span>, add <span class="op">=</span> <span class="cn">TRUE</span>, ylim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">0.5</span>, <span class="fl">0.5</span><span class="op">)</span>, ylimAdj <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span><span class="co">#&gt; Running Runs Test Diagnostics w/ plots forMean age</span></span>
<span><span class="co">#&gt; Plotting Residual Runs Tests</span></span></code></pre></div>
<p><img src="residuals_files/figure-html/unnamed-chunk-4-1.png" width="700"></p>
<pre><code><span><span class="co">#&gt; Residual Runs Test (/w plot) stats by Mean age:</span></span>
<span><span class="co">#&gt;     Index runs.p   test  sigma3.lo sigma3.hi type</span></span>
<span><span class="co">#&gt; 1 SURVEY1   0.11 Passed -0.2743816 0.2743816  age</span></span></code></pre>
<p>Note that a small adjustment is automatically added to the ylim to
provide extra white space. This is why in the third plot, even though we
set the y-axis to range from -0.5 to 0.5, the y-axis goes from -0.6 to
0.6. If you do not want the extra space, set <code>ylimAdj = 1</code> as
done in the 4th plot.</p>
</div>
<div class="section level3">
<h3 id="summary-table">Summary Table<a class="anchor" aria-label="anchor" href="#summary-table"></a>
</h3>
<p>In addition to the residual plots, <code><a href="../reference/SSplotRunstest.html">SSplotRunstest()</a></code>
produces a summary table of the runs test output values, including:</p>
<ul>
<li>p-value for the runs test<br>
</li>
<li>if the test passed or failed (indicated by green or red shading in
the plot)</li>
<li>upper and lower limits for the 3-sigma interval</li>
<li>type of data tested (CPUE, length-composition, age-composition, or
conditional age-at-length)</li>
</ul>
<p>To only produce the summary table and skip the plot, e.g. to
faciliate automated processing, use <code><a href="../reference/SSrunstest.html">SSrunstest()</a></code>.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">rcpue</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/SSrunstest.html">SSrunstest</a></span><span class="op">(</span><span class="va">report</span>, quants <span class="op">=</span> <span class="st">"cpue"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Running Runs Test Diagnosics for Index</span></span>
<span><span class="co">#&gt; Computing Residual Runs Tests</span></span>
<span><span class="co">#&gt; Residual Runs Test stats by Index:</span></span>
<span><span class="va">rlen</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/SSrunstest.html">SSrunstest</a></span><span class="op">(</span><span class="va">report</span>, quants <span class="op">=</span> <span class="st">"len"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Running Runs Test Diagnosics for Mean length</span></span>
<span><span class="co">#&gt; Computing Residual Runs Tests</span></span>
<span><span class="co">#&gt; Residual Runs Test stats by Mean length:</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">rbind</a></span><span class="op">(</span><span class="va">rcpue</span>, <span class="va">rlen</span><span class="op">)</span></span>
<span><span class="co">#&gt;     Index runs.p   test  sigma3.lo sigma3.hi type</span></span>
<span><span class="co">#&gt; 1 SURVEY1  0.159 Passed -0.7301441 0.7301441 cpue</span></span>
<span><span class="co">#&gt; 2 SURVEY2  0.887 Passed -1.1052361 1.1052361 cpue</span></span>
<span><span class="co">#&gt; 3 FISHERY  0.126 Passed -0.0613176 0.0613176  len</span></span>
<span><span class="co">#&gt; 4 SURVEY1  0.841 Passed -0.1725225 0.1725225  len</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="rmse">RMSE<a class="anchor" aria-label="anchor" href="#rmse"></a>
</h2>
<p>RMSE or root mean square error is useful for evaluating how far
predictions fall from the observed data. The
<code><a href="../reference/SSplotJABBAres.html">ss3diags::SSplotJABBAres()</a></code> function allows you to visualize
the full time series of residuals for all fleets of the indicated data
(index of abundance or composition). In the example below, we plot the
residuals for index of abundance, mean age (age-composition), and mean
length (length composition) for both fleets.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://r4ss.github.io/r4ss/reference/sspar.html" class="external-link">sspar</a></span><span class="op">(</span>mfrow <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/SSplotJABBAres.html">SSplotJABBAres</a></span><span class="op">(</span><span class="va">report</span>, subplots <span class="op">=</span> <span class="st">"cpue"</span>, add <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt; Plotting JABBA residual plot.</span></span>
<span><span class="co">#&gt; is plot TRUE? TRUE</span></span>
<span><span class="co">#&gt; drawing plot at</span></span>
<span><span class="co">#&gt; Plot exists:</span></span>
<span><span class="co">#&gt; RMSE stats by Index:</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 3 × 3</span></span></span>
<span><span class="co">#&gt;   Fleet    RMSE.perc  Nobs</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> SURVEY1       21.6     4</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> SURVEY2       27.7    12</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> Combined      26.3    16</span></span>
<span><span class="fu"><a href="../reference/SSplotJABBAres.html">SSplotJABBAres</a></span><span class="op">(</span><span class="va">report</span>, subplots <span class="op">=</span> <span class="st">"age"</span>, add <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt; Plotting JABBA residual plot.</span></span>
<span><span class="co">#&gt; is plot TRUE? TRUE</span></span>
<span><span class="co">#&gt; drawing plot at</span></span>
<span><span class="co">#&gt; Plot exists:</span></span>
<span><span class="co">#&gt; RMSE stats by Index:</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 3 × 3</span></span></span>
<span><span class="co">#&gt;   Fleet    RMSE.perc  Nobs</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> FISHERY        9      12</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> SURVEY1        8.1     4</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> Combined       8.8    16</span></span>
<span><span class="fu"><a href="../reference/SSplotJABBAres.html">SSplotJABBAres</a></span><span class="op">(</span><span class="va">report</span>, subplots <span class="op">=</span> <span class="st">"len"</span>, add <span class="op">=</span> <span class="cn">TRUE</span>, ylim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">0.2</span>, <span class="fl">0.2</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; Plotting JABBA residual plot.</span></span>
<span><span class="co">#&gt; is plot TRUE? TRUE</span></span>
<span><span class="co">#&gt; drawing plot at</span></span>
<span><span class="co">#&gt; Plot exists:</span></span>
<span><span class="co">#&gt; RMSE stats by Index:</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 3 × 3</span></span></span>
<span><span class="co">#&gt;   Fleet    RMSE.perc  Nobs</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> FISHERY        2.1    12</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> SURVEY1        3.4     4</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> Combined       2.5    16</span></span></code></pre></div>
<p><img src="residuals_files/figure-html/unnamed-chunk-6-1.png" width="700"></p>
<p>In the plots above, each point represents the difference between the
observed and expected value (residual) and is color-coded to correspond
to a specific fleet. The solid, color-coded vertical lines from the
horizontal dashed line (at y = 0) show the distance between 0 and the
residual value. Box plots summarize the spread of residual values across
all fleets within each year and the thick solid black line is a loess
smoother fit through all residual points. Total RMSE is displayed in the
top right corner. When assessing this plot, it is important to see if
there are any patterns or trends in the residuals, how large the overall
RMSE is, and whether the data from different fleets generally agrees or
conflicts with each other.</p>
<p>To retrieve just RMSE and residual values without generating the
plot, <code><a href="../reference/SSrmse.html">SSrmse()</a></code> produces a named list with 2 objects,
<code>RMSE</code> and <code>residuals</code>. These can be accessed as
shown below. This function is useful for automating analyses.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">rmse</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/SSrmse.html">SSrmse</a></span><span class="op">(</span><span class="va">report</span>, quants <span class="op">=</span> <span class="st">"cpue"</span><span class="op">)</span><span class="op">$</span><span class="va">RMSE</span></span>
<span><span class="va">residuals</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/SSrmse.html">SSrmse</a></span><span class="op">(</span><span class="va">report</span>, quants <span class="op">=</span> <span class="st">"cpue"</span><span class="op">)</span><span class="op">$</span><span class="va">residuals</span></span>
<span></span>
<span><span class="va">rmse</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 3 × 3</span></span></span>
<span><span class="co">#&gt;   Fleet    RMSE.perc  Nobs</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> SURVEY1       21.6     4</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> SURVEY2       27.7    12</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> Combined      26.3    16</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">residuals</span><span class="op">)</span></span>
<span><span class="co">#&gt;     Fleet Fleet_name Area   Yr Seas Subseas Month   Time Vuln_bio         Obs</span></span>
<span><span class="co">#&gt; 961     2    SURVEY1    1 2013    1       2     7 2013.5 62947.50 144745.0000</span></span>
<span><span class="co">#&gt; 962     2    SURVEY1    1 2016    1       2     7 2016.5 49335.70  63760.3000</span></span>
<span><span class="co">#&gt; 963     2    SURVEY1    1 2019    1       2     7 2019.5 38132.00  59242.9000</span></span>
<span><span class="co">#&gt; 964     2    SURVEY1    1 2022    1       2     7 2022.5 34045.80  49649.7000</span></span>
<span><span class="co">#&gt; 965     3    SURVEY2    1 2011    1       2     7 2011.5  6306.83     11.5668</span></span>
<span><span class="co">#&gt; 966     3    SURVEY2    1 2012    1       2     7 2012.5  6544.96     13.9955</span></span>
<span><span class="co">#&gt;             Exp     Calc_Q      Eff_Q  SE SE_input         Dev        Like</span></span>
<span><span class="co">#&gt; 961 101399.0000 1.61084000 1.61084000 0.3      0.3  0.35591400 7.03749e-01</span></span>
<span><span class="co">#&gt; 962  79472.2000 1.61084000 1.61084000 0.3      0.3 -0.22027600 2.69564e-01</span></span>
<span><span class="co">#&gt; 963  61424.7000 1.61084000 1.61084000 0.3      0.3 -0.03616590 7.26653e-03</span></span>
<span><span class="co">#&gt; 964  54842.4000 1.61084000 1.61084000 0.3      0.3 -0.09947210 5.49706e-02</span></span>
<span><span class="co">#&gt; 965     11.5342 0.00182885 0.00182885 0.7      0.7  0.00281832 8.10502e-06</span></span>
<span><span class="co">#&gt; 966     11.9698 0.00182885 0.00182885 0.7      0.7  0.15635300 2.49451e-02</span></span>
<span><span class="co">#&gt;     Like+log(s) SuprPer Use    residuals</span></span>
<span><span class="co">#&gt; 961   -0.500223      NA   1  0.355910344</span></span>
<span><span class="co">#&gt; 962   -0.934409      NA   1 -0.220276535</span></span>
<span><span class="co">#&gt; 963   -1.196710      NA   1 -0.036166093</span></span>
<span><span class="co">#&gt; 964   -1.149000      NA   1 -0.099471269</span></span>
<span><span class="co">#&gt; 965   -0.356667      NA   1  0.002822391</span></span>
<span><span class="co">#&gt; 966   -0.331730      NA   1  0.156349038</span></span></code></pre></div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Henning Winker, Felipe Carvalho, Massimiliano Cardinale, Laurence Kell, Megumi Oshima, Eric Fletcher.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
